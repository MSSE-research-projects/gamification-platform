{% extends 'boilerplates/base_navbar.html' %}
{% load static %}
{% load widget_tweaks %}

{% block title %}Artifact{% endblock %}

{% block content %}
<div class="container-scroller" style="width: 100%; height: 60%">
  <div class="col-lg-12 grid-margin stretch-card">
    <div class="card">
      <div class="card-body">
        <h4 class="card-title"><a href="{% url 'assignment' course_id %}"><button type="button"
          class="btn btn-outline-primary">Back</button></a>
            &nbsp&nbsp&nbsp&nbsp&nbsp {{ assignment.assignment_name }} - Artifact</h4>
        <div class="table-responsive">
          <table class="table table-striped">
            <thead>
              <tr>
                <th>
                  id
                </th>
                <th>
                  File
                </th>
                <th>
                  Upload time
                </th>
              </tr>
            </thead>
            {% for artifact in artifacts %}
            <tbody>
              <tr>
                <td>
                  <p> {{ artifact.id }}</p>
                </td>
                <td>
                  {{ artifact.file|cut:'assignment_files/' }}
                </td>
                <td>
                  {{ artifact.upload_time}}
                </td>
                {% if userRole == 'Instructor' or userRole == 'TA' or userRole == 'Student'%}
                <td>
                  <a href="{% url 'download_artifact' course_id assignment.id artifact.id %}">
                    <button type="button" class="btn-sm btn-primary">View</button>
                  </a>
                </td>
                <td>
                  <a href="{% url 'edit_artifact' course_id assignment.id artifact.id %}">
                    <button type="button" class="btn-sm btn-primary">Edit</button>
                  </a>
                </td>
                <td>
                  <a href="{% url 'delete_artifact' course_id assignment.id artifact.id %}">
                    <button type="button" class="btn-sm btn-primary">Delete</button>
                  </a>
                </td>
                {% endif %}
              </tr>
            </tbody>
            {% endfor %}
          </table>
        </div>
      </div>
    </div>
  </div>
  {% if artifacts %}
  <p> <p>
  {% else %}
  {% if userRole == 'Instructor' or userRole == 'TA' or userRole == 'Student' %}
  <div class="col-12 grid-margin stretch-card">
    <div class="card">
        <div class="card-body">
            <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <h4 class="card-title">Upload file</h4>
            <input hidden name="entity" class="form-control" id="entity-ID" value="{{ entity.id }}">
            <input hidden name="assignment" class="form-control" id="assignment-ID" value="{{ assignment.id }}">
            <div class="form-group">
                <label for="file">File:</label>
                <input type="file" name="file" style="height: auto; padding: 0.375rem 0.75rem;" class="form-control" id="file">
            </div>
            {% comment %} <input type="hidden" name="course" class="form-control" id="course-ID" value="{{ course_id }}"> {% endcomment %}
            <button type="submit" class="btn btn-primary me-2">Add</button>
            </form>
        </div>
    </div>
  </div>
  {% endif %}
  {% endif %}
</div>
{% endblock content %}