{% extends 'boilerplates/base_navbar.html' %}
{% load static %}
{% load widget_tweaks %}

{% block title %}Artifact For Admin{% endblock %}

{% block content %}
<div class="container-scroller" style="width: 100%; height: 60%">
  <div class="col-lg-12 grid-margin stretch-card">
    <div class="card">
      <div class="card-body">
        <h4 class="card-title"><a href="{% url 'view_assignment' course_id assignment.id%}"><button type="button"
              class="btn btn-outline-primary">Back</button></a>
          &nbsp&nbsp&nbsp{{ course.course_name}} - {{assignment.assignment_name}}</h4>
        <div class="table-responsive">
          <table class="table table-striped">
            <thead>
              <tr>
                <th>
                  id
                </th>
                <th>
                  File
                </th>
                <th>
                  Uploader
                </th>
                <th>
                  Upload time
                </th>
                {% if userRole == 'Instructor' or userRole == 'TA' or userRole == 'Student'%}
                <th></th>
                {% endif %}
              </tr>
            </thead>
            {% for artifact in artifacts %}
            <tbody>
              <tr>
                <td>
                  <p> {{ artifact.id }}</p>
                </td>
                <td>
                  {{ artifact.file|cut:'assignment_files/'}}
                </td>
                <td>
                  {% if artifact.entity.team.name %}
                  {{ artifact.entity.team.name }}
                  {% else %}
                    {% for member in artifact.entity.members%}
                      {{ member }}
                    {% endfor %}
                  {% endif %}
                </td>
                <td>
                  {{ artifact.upload_time}}
                </td>
                {% if userRole == 'Instructor' or userRole == 'TA' or userRole == 'Student'%}
                {% comment %} <td>
                  <a href="{% url 'view_artifact' course_id assignment.id artifact.id %}">
                    <button type="button" class="btn-sm btn-primary">view</button>
                  </a>
                </td> {% endcomment %}
                <td>
                  <a href="{% url 'download_artifact' course_id assignment.id artifact.id %}">
                    <button type="button" class="btn-sm btn-primary">Open</button>
                  </a>
                </td>
                {% comment %} <td>
                  <a href="{% url 'edit_artifact' course_id assignment.id artifact.id %}">
                    <button type="button" class="btn-sm btn-primary">Edit</button>
                  </a>
                </td>
                <td>
                  <a href="{% url 'delete_artifact' course_id assignment.id artifact.id %}">
                    <button type="button" class="btn-sm btn-primary">delete</button>
                  </a>
                </td> {% endcomment %}
                {% endif %}
              </tr>
            </tbody>
            {% endfor %}
          </table>
        </div>
      </div>
    </div>
  </div>

</div>
{% endblock content %}